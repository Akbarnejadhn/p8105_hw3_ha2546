p8105\_hw3\_ha2546
================
Hana Akbarnejad
10/9/2019

``` r
# set.seed(5)
# random_sample = instacart %>% 
#   filter(
#   sample(pull(instacart, order_id))
#   )
```

In the first problem, we are interested in exploring the *instacart*
dataset. This dataset stores information about online grocery shopping
from 2017. The datset contains 1384617 observations of 131209 unique
orders of 39123 differennt products. There are 15 variables associated
with these rows such as *order\_dow* (the day of the week that the order
has been placed), *order\_hour\_of\_day* (the time of the day that the
order has been placed), *product\_name* (the item purchased), *aisle*
(the aisle that the item has chosen from), etc. We can take differenvt
samples from this dataset.

# Problem1

How many aisles are there, and which aisles are the most items ordered
from? I grouped the dtaset by the aisles, and understood that there are
total of 134 different isles. Then I counted the number of times items
have been ordered from each isle. By further arranging this column in
descending order, I found the most popular isles. Top five aisles with
the most items ordered from are fresh vegetables, fresh fruits, packaged
vegetable fruits, yogurt, packaged cheese.I then made a plot that shows
the number of items ordered in each aisle (only for aisles with more
than 10000 items ordered). For this purpose I made a bar plot that shows
the aisle names on x axis and the number of items ordered on y axis.

**should we arrange the columns from most to least? how?**

``` r
aisle_fav_n = instacart %>% 
  group_by(aisle) %>% 
  count(aisle, name = "aisle_order_n") %>% 
  arrange(desc(aisle_order_n))

aisle_fav_plot = aisle_fav_n %>% 
  filter(aisle_order_n > 10000) %>% 
  ggplot(aes(x = reorder(aisle, -aisle_order_n), y = aisle_order_n)) +
  geom_bar(stat="identity", width=0.5, color="blue", fill="white") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  labs(
    title = "Number of Orders in Favorite Aisles",
    x = "Aisle name",
    y = "Number of orders",
    caption = "Plot 1"
  )

aisle_fav_n
```

    ## # A tibble: 134 x 2
    ## # Groups:   aisle [134]
    ##    aisle                         aisle_order_n
    ##    <chr>                                 <int>
    ##  1 fresh vegetables                     150609
    ##  2 fresh fruits                         150473
    ##  3 packaged vegetables fruits            78493
    ##  4 yogurt                                55240
    ##  5 packaged cheese                       41699
    ##  6 water seltzer sparkling water         36617
    ##  7 milk                                  32644
    ##  8 chips pretzels                        31269
    ##  9 soy lactosefree                       26240
    ## 10 bread                                 23635
    ## # ... with 124 more rows

``` r
aisle_fav_plot
```

<img src="p8105_hw3_ha2546_files/figure-gfm/instacart-1.png" width="90%" />

**top\_n doesnâ€™t seem working**

``` r
x = instacart %>% 
  select(product_name, aisle) %>% 
  filter(aisle == c("baking ingredients", "dog food care", "packaged vegetables fruits")) %>% 
  group_by(product_name, aisle) %>% 
  summarize(count = n()) %>% 
  arrange(desc(count)) %>% 
  top_n(3, count)
```

In this part,

``` r
hours_days_products = instacart %>% 
  select(product_name, order_dow, order_hour_of_day) %>% 
  filter(product_name == c("Pink Lady Apples", "Coffee Ice Cream")) %>% 
  group_by(product_name, order_dow) %>% 
  summarize(
    hours_mean = mean(order_hour_of_day)
  ) %>% 
  pivot_wider(
    names_from = order_dow,
    values_from = hours_mean
  ) %>% 
  knitr::kable(digits = 1)
```
